const testimonialSlides = document.querySelectorAll('.testimonial-slide');
if (testimonialSlides.length > 0) {
    const prevButton = document.getElementById('prev-testimonial');
    const nextButton = document.getElementById('next-testimonial');
    let currentSlide = 0;
    let testimonialInterval = null;

    function showSlide(index) {
        testimonialSlides.forEach((slide, i) => {
            slide.classList.toggle('hidden', i !== index);
        });
    }

    function startSliderInterval() {
        // Always clear existing interval before starting a new one
        clearInterval(testimonialInterval);
        testimonialInterval = setInterval(() => {
            currentSlide = (currentSlide + 1) % testimonialSlides.length;
            showSlide(currentSlide);
        }, 5000);
    }

    if (prevButton && nextButton) {
        prevButton.addEventListener('click', () => {
            currentSlide = (currentSlide - 1 + testimonialSlides.length) % testimonialSlides.length;
            showSlide(currentSlide);
            startSliderInterval(); // Reset interval
        });

        nextButton.addEventListener('click', () => {
            currentSlide = (currentSlide + 1) % testimonialSlides.length;
            showSlide(currentSlide);
            startSliderInterval(); // Reset interval
        });

        // Initialize slider
        showSlide(currentSlide);
        startSliderInterval();

        const testimonialContainer = document.querySelector('.testimonial-slider');
        if (testimonialContainer) {
            testimonialContainer.addEventListener('mouseenter', () => {
                clearInterval(testimonialInterval);
            });

            testimonialContainer.addEventListener('mouseleave', () => {
                startSliderInterval();
            });

            testimonialContainer.addEventListener('focusin', () => {
                clearInterval(testimonialInterval);
            });

            testimonialContainer.addEventListener('focusout', () => {
                startSliderInterval();
            });
        }
    }
}
